# ğŸ§ Cupcake AI Bot â€” System Architecture
**Date:** February 14, 2026
**Version:** 1.0

---

## High-Level Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          USER (Matt Hales)                              â”‚
â”‚                                                                         â”‚
â”‚    ğŸ“± Phone          ğŸ’¬ Telegram        ğŸŒ Web Dashboard    ğŸ’» CLI      â”‚
â”‚  +1(872)666-9598   @CupcakeApocalypse   hales.ai/cupcake   openclaw    â”‚
â”‚       Bot                                                               â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                â”‚                  â”‚                    â”‚
     â–¼                â–¼                  â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Vapi   â”‚    â”‚ Telegram  â”‚     â”‚    n8n       â”‚    â”‚  OpenClaw    â”‚
â”‚  Voice  â”‚    â”‚  Bot API  â”‚     â”‚  Webhook     â”‚    â”‚  Runtime     â”‚
â”‚  Agent  â”‚    â”‚           â”‚     â”‚ /cupcake-web â”‚    â”‚ (localhost)  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚               â”‚                  â”‚                    â”‚
     â”‚               â”‚                  â”‚                    â”‚
     â–¼               â–¼                  â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        AI PROCESSING LAYER                           â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                   OpenRouter API Gateway                       â”‚  â”‚
â”‚  â”‚                https://openrouter.ai/api/v1                   â”‚  â”‚
â”‚  â”‚                                                                â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚  â”‚
â”‚  â”‚  â”‚DeepSeek  â”‚ â”‚DeepSeek  â”‚ â”‚  Grok 4  â”‚ â”‚ Kimi K2  â”‚        â”‚  â”‚
â”‚  â”‚  â”‚   R1     â”‚ â”‚  V3.2    â”‚ â”‚  (x-ai)  â”‚ â”‚(moonshot)â”‚        â”‚  â”‚
â”‚  â”‚  â”‚reasoning â”‚ â”‚  fast    â”‚ â”‚ agentic  â”‚ â”‚multimodalâ”‚        â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚  â”‚
â”‚  â”‚  â”‚ Qwen3    â”‚ â”‚ Gemini 3 â”‚ â”‚NanoBananaâ”‚ â”‚Seedream  â”‚        â”‚  â”‚
â”‚  â”‚  â”‚  235B    â”‚ â”‚  Flash   â”‚ â”‚Pro (img) â”‚ â”‚4.5 (img) â”‚        â”‚  â”‚
â”‚  â”‚  â”‚reasoning â”‚ â”‚multimodalâ”‚ â”‚gen imagesâ”‚ â”‚gen imagesâ”‚        â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                      â”‚
â”‚  System Prompt: SOUL.md persona (loaded per channel)                 â”‚
â”‚  - Voice: DeepSeek V3.2 (fast ~5s)                                   â”‚
â”‚  - Web:   DeepSeek R1 (reasoning ~15s)                               â”‚
â”‚  - CLI:   Configurable (all models)                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      RESPONSE DELIVERY                               â”‚
â”‚                                                                      â”‚
â”‚  Voice:  AI response â†’ Vapi TTS â†’ Phone speaker + Telegram log      â”‚
â”‚  Telegram: AI response â†’ Telegram message (inline)                   â”‚
â”‚  Web:    AI response â†’ JSON â†’ Browser chat bubble                    â”‚
â”‚  CLI:    AI response â†’ Terminal stdout                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Detailed Component Map

### 1. Channel Layer (User-Facing)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PHONE CHANNEL                                                â”‚
â”‚                                                              â”‚
â”‚  +1(872)666-9598 â”€â”€â†’ Vapi.ai Platform                      â”‚
â”‚                       â”‚                                      â”‚
â”‚                       â”œâ”€ Voice: ElevenLabs "Savannah"       â”‚
â”‚                       â”œâ”€ Model: gpt-4o (Vapi's LLM layer)  â”‚
â”‚                       â”œâ”€ Tool: cupcake_command               â”‚
â”‚                       â”‚   â””â”€ serverUrl: /vapi-cupcake-hook  â”‚
â”‚                       â”‚                                      â”‚
â”‚                       â””â”€ On tool_call â†’ POST to n8n webhook â”‚
â”‚                                                              â”‚
â”‚  Assistant ID: ef458c7a-ba2e-49f6-97a2-f455c54978f7        â”‚
â”‚  Phone ID:     fecddf0f-abc8-4b60-b4de-e0df8a02cc0e        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TELEGRAM CHANNEL                                             â”‚
â”‚                                                              â”‚
â”‚  @CupcakeApocalypseBot â”€â”€â†’ OpenClaw Telegram Channel        â”‚
â”‚                             â”‚                                â”‚
â”‚                             â”œâ”€ User ID lock: 5803796679     â”‚
â”‚                             â”œâ”€ Commands: /drama /draw etc   â”‚
â”‚                             â”œâ”€ Gateway: localhost:18789      â”‚
â”‚                             â””â”€ Full agent (tools + files)   â”‚
â”‚                                                              â”‚
â”‚  Bot Token: 8303200456:AAG... (in .env)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ WEB DASHBOARD CHANNEL                                        â”‚
â”‚                                                              â”‚
â”‚  hales.ai/cupcake â”€â”€â†’ React SPA                             â”‚
â”‚                        â”‚                                     â”‚
â”‚                        â”œâ”€ Auth: Password (CupcakeDestroyer) â”‚
â”‚                        â”œâ”€ Session: 24h token in localStorageâ”‚
â”‚                        â”œâ”€ API: POST /cupcake-web webhook    â”‚
â”‚                        â”œâ”€ Special: /call triggers Vapi call â”‚
â”‚                        â””â”€ UI: Framer Motion + Tailwind CSS  â”‚
â”‚                                                              â”‚
â”‚  Served by: Docker container on DO (port 3000)              â”‚
â”‚  Proxied by: nginx (hales.ai â†’ 127.0.0.1:3000)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CLI CHANNEL                                                  â”‚
â”‚                                                              â”‚
â”‚  openclaw agent â”€â”€â†’ OpenClaw Runtime                        â”‚
â”‚                     â”‚                                        â”‚
â”‚                     â”œâ”€ Config: ~/.openclaw/openclaw.json    â”‚
â”‚                     â”œâ”€ Workspace: ~/Projects/Cupcake        â”‚
â”‚                     â”œâ”€ Gateway: localhost:18789              â”‚
â”‚                     â””â”€ Full agent (all tools, models, files)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. n8n Automation Hub (automate.hales.ai)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   n8n (automate.hales.ai:5678)                   â”‚
â”‚                                                                   â”‚
â”‚  CUPCAKE WORKFLOWS:                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Voice-to-Telegram Bridge (wI5F001Io6nOH4Vt)              â”‚   â”‚
â”‚  â”‚                                                            â”‚   â”‚
â”‚  â”‚  Webhook â”€â”€â†’ Parse â”€â”€â†’ OpenRouter â”€â”€â†’ Format â”€â”€â†’ Telegram â”‚   â”‚
â”‚  â”‚  /vapi-     Command    DeepSeek V3.2   Reply     + Vapi   â”‚   â”‚
â”‚  â”‚  cupcake-                                        Response  â”‚   â”‚
â”‚  â”‚  hook                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Web Dashboard API (BE4mSVyET3yVyl10)                      â”‚   â”‚
â”‚  â”‚                                                            â”‚   â”‚
â”‚  â”‚  Webhook â”€â”€â†’ Route â”€â”€â†’ Is Call? â”€â”€â”¬â”€â†’ Vapi Call (outbound)â”‚   â”‚
â”‚  â”‚  /cupcake-   Code     If node    â”‚                        â”‚   â”‚
â”‚  â”‚  web                             â””â”€â†’ OpenRouter â”€â”€â†’ Reply â”‚   â”‚
â”‚  â”‚                                      DeepSeek R1          â”‚   â”‚
â”‚  â”‚  Handles CORS preflight (OPTIONS)                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Deploy hales.ai (4jv1ATk78dheD7Xk)                       â”‚   â”‚
â”‚  â”‚                                                            â”‚   â”‚
â”‚  â”‚  Webhook â”€â”€â†’ Execute Command â”€â”€â†’ Notify Telegram          â”‚   â”‚
â”‚  â”‚  /cupcake-   /var/www/deploy-     Build status message    â”‚   â”‚
â”‚  â”‚  deploy      hales-ai.sh                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â”‚  PRE-EXISTING WORKFLOWS (30 total):                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ emailAgent â”‚ â”‚ calendarAgentâ”‚ â”‚ contactAgent  â”‚                â”‚
â”‚  â”‚ Gmail CRUD â”‚ â”‚ Google Cal   â”‚ â”‚ Airtable      â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚contentCreatâ”‚ â”‚ElevenLabs   â”‚ â”‚Vapi Call Rec  â”‚                â”‚
â”‚  â”‚Tavily+Claudeâ”‚ â”‚TTS Webhook  â”‚ â”‚Email transcptâ”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚  â”‚ Ultimate Assistant Main (Orchestrator)      â”‚                  â”‚
â”‚  â”‚ Routes to: email, calendar, contacts, etc.  â”‚                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Infrastructure Layer (Digital Ocean)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Digital Ocean Droplet: 134.199.239.171                   â”‚
â”‚         OS: Ubuntu                                               â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚                    nginx (reverse proxy)                  â”‚     â”‚
â”‚  â”‚                                                           â”‚     â”‚
â”‚  â”‚  hales.ai:443          â†’ 127.0.0.1:3000 (Docker)        â”‚     â”‚
â”‚  â”‚  automate.hales.ai:443 â†’ 0.0.0.0:5678  (n8n)           â”‚     â”‚
â”‚  â”‚  *:80                  â†’ 301 https://                    â”‚     â”‚
â”‚  â”‚                                                           â”‚     â”‚
â”‚  â”‚  SSL: Let's Encrypt (auto-renewed)                       â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ Docker: hales-ai-web â”‚  â”‚ n8n (native, port 5678)  â”‚         â”‚
â”‚  â”‚ nginx:alpine         â”‚  â”‚                           â”‚         â”‚
â”‚  â”‚ Port: 3000           â”‚  â”‚ 30 workflows              â”‚         â”‚
â”‚  â”‚ Content: React SPA   â”‚  â”‚ Webhooks:                 â”‚         â”‚
â”‚  â”‚ Auto-restart: yes    â”‚  â”‚  /vapi-cupcake-hook       â”‚         â”‚
â”‚  â”‚                      â”‚  â”‚  /cupcake-web             â”‚         â”‚
â”‚  â”‚ Source:              â”‚  â”‚  /cupcake-deploy          â”‚         â”‚
â”‚  â”‚ /var/www/hales-ai-   â”‚  â”‚  /generate-voice          â”‚         â”‚
â”‚  â”‚ website/             â”‚  â”‚  + 20 more                 â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ /var/www/deploy-hales-ai.sh                               â”‚   â”‚
â”‚  â”‚                                                            â”‚   â”‚
â”‚  â”‚ git pull origin main                                       â”‚   â”‚
â”‚  â”‚ docker build --no-cache -t hales-ai-website .             â”‚   â”‚
â”‚  â”‚ docker stop/rm hales-ai-website                           â”‚   â”‚
â”‚  â”‚ docker run -d -p 3000:3000 --restart always ...           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Matt's Mac (local development)                           â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ OpenClaw Runtime                                          â”‚   â”‚
â”‚  â”‚ Config: ~/.openclaw/openclaw.json                        â”‚   â”‚
â”‚  â”‚ Secrets: ~/.openclaw/.env (chmod 600)                    â”‚   â”‚
â”‚  â”‚ Gateway: localhost:18789 (loopback only)                 â”‚   â”‚
â”‚  â”‚ Workspace: ~/Projects/Cupcake/                           â”‚   â”‚
â”‚  â”‚                                                           â”‚   â”‚
â”‚  â”‚ Files:                                                    â”‚   â”‚
â”‚  â”‚  SOUL.md, IDENTITY.md, AGENTS.md, USER.md, TOOLS.md     â”‚   â”‚
â”‚  â”‚  skills/ (7 custom skills)                               â”‚   â”‚
â”‚  â”‚  cupcake-opolis/ (forked source)                         â”‚   â”‚
â”‚  â”‚  hales-ai-website/ (website source)                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Node.js v22 (via nvm) + npm                              â”‚   â”‚
â”‚  â”‚ gh CLI (GitHub, logged in as notsoround)                 â”‚   â”‚
â”‚  â”‚ Cursor IDE                                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. Data Flow Diagrams

#### Voice Call Flow
```
User speaks â†’ Phone +1(872)666-9598
    â†’ Vapi transcribes (Whisper)
    â†’ Vapi LLM decides to use cupcake_command tool
    â†’ POST to https://automate.hales.ai/webhook/vapi-cupcake-hook
        Body: { message: { toolCalls: [{ function: { arguments: { command, context } } }] } }
    â†’ n8n: Parse Command (extract command + context + toolCallId)
    â†’ n8n: OpenRouter API (DeepSeek V3.2 + Cupcake persona)
    â†’ n8n: Format Reply
    â†’ n8n: Send to Telegram (log)
    â†’ n8n: Return to Vapi { results: [{ toolCallId, result: "AI response" }] }
    â†’ Vapi: ElevenLabs TTS (Savannah voice)
    â†’ User hears response
```

#### Web Dashboard Flow
```
User types at hales.ai/cupcake
    â†’ POST to https://automate.hales.ai/webhook/cupcake-web
        Body: { message: "user text" }
        Headers: { Content-Type: application/json }
    â†’ n8n: Route (parse body)
    â†’ n8n: Is Call? (check for /call command)
        â”œâ”€ YES: Vapi outbound call to Matt's phone
        â””â”€ NO:  OpenRouter API (DeepSeek R1 + Cupcake persona)
                    â†’ Build Reply
                    â†’ Respond { reply: "AI response" }
    â†’ Browser renders chat bubble with response
```

#### Telegram Flow
```
User sends message to @CupcakeApocalypseBot
    â†’ Telegram Bot API webhook
    â†’ OpenClaw Gateway (localhost:18789)
    â†’ Agent processes with full context (SOUL.md, skills, workspace files)
    â†’ OpenRouter API (configurable model)
    â†’ Response sent back via Telegram API
```

#### Deploy Flow
```
Option A: POST to https://automate.hales.ai/webhook/cupcake-deploy
Option B: SSH into droplet + run /var/www/deploy-hales-ai.sh
    â†’ git pull origin main
    â†’ docker build --no-cache -t hales-ai-website .
    â†’ docker stop + rm old container
    â†’ docker run new container (port 3000, auto-restart)
    â†’ Notify Telegram with status
```

### 5. External Services Map

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EXTERNAL SERVICES                          â”‚
â”‚                                                               â”‚
â”‚  AI Models:                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚  â”‚ OpenRouter   â”‚â”€â”€â†’ DeepSeek, Grok, Kimi, Qwen, Gemini    â”‚
â”‚  â”‚ API Gateway  â”‚    + Image models (NanoBanana, Seedream)  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚                                                               â”‚
â”‚  Voice:                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚  â”‚ Vapi.ai      â”‚  â”‚ ElevenLabs   â”‚                         â”‚
â”‚  â”‚ Voice Agent  â”‚  â”‚ TTS Engine   â”‚                         â”‚
â”‚  â”‚ Phone Number â”‚  â”‚ "Savannah"   â”‚                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                               â”‚
â”‚  Messaging:                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚
â”‚  â”‚ Telegram     â”‚                                            â”‚
â”‚  â”‚ Bot API      â”‚                                            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚
â”‚                                                               â”‚
â”‚  Google (via n8n):                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚  â”‚ Gmail        â”‚  â”‚ Google       â”‚                         â”‚
â”‚  â”‚ (OAuth2)     â”‚  â”‚ Calendar     â”‚                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                               â”‚
â”‚  Other (via n8n):                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Airtable     â”‚  â”‚ Tavily       â”‚  â”‚ GitHub       â”‚      â”‚
â”‚  â”‚ (Contacts)   â”‚  â”‚ (Search)     â”‚  â”‚ (Repos)      â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Security Boundary Map

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PUBLIC INTERNET                     â”‚
â”‚                                                  â”‚
â”‚  hales.ai â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”                â”‚
â”‚  automate.hales.ai â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚                â”‚
â”‚  Telegram webhooks â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚  nginx (SSL)   â”‚
â”‚  Vapi webhooks â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚  Let's Encrypt â”‚
â”‚                                 â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                                     â”‚            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚            DROPLET BOUNDARY                   â”‚â”‚
â”‚ â”‚                                               â”‚â”‚
â”‚ â”‚  Docker (port 3000) â†â”€ nginx proxy            â”‚â”‚
â”‚ â”‚  n8n (port 5678) â†â”€â”€â”€ nginx proxy             â”‚â”‚
â”‚ â”‚                                               â”‚â”‚
â”‚ â”‚  Credentials: n8n stores OAuth tokens         â”‚â”‚
â”‚ â”‚  Deploy script: root access on droplet        â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                  â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚            MAC BOUNDARY (local only)          â”‚â”‚
â”‚ â”‚                                               â”‚â”‚
â”‚ â”‚  OpenClaw Gateway (loopback:18789)            â”‚â”‚
â”‚ â”‚  ~/.openclaw/.env (chmod 600)                 â”‚â”‚
â”‚ â”‚  All API keys                                 â”‚â”‚
â”‚ â”‚  Agent workspace + memory                     â”‚â”‚
â”‚ â”‚  NOT accessible from internet                 â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

*Last updated: February 14, 2026*
